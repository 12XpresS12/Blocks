plugins {
    id 'java'
}

ext {
    sio2Version = "[1.3,)"
    jmeFastNoise = "[1.,)"
    log4j2Version = "[2.11,)"
    jacksonVersion = "[2.9,)"
}

repositories {
    jcenter()
    maven { url 'https://dl.bintray.com/stephengold/jme3utilities' } // for Minie
    maven { url 'https://dl.bintray.com/stephengold/v-hacd' } // for v-hacd-java-bindings
}

dependencies {
    // Blocks
    implementation rootProject

    // JME
    implementation "org.jmonkeyengine:jme3-core:${jmeVersion}"
    implementation "org.jmonkeyengine:jme3-desktop:${jmeVersion}"
    implementation "org.jmonkeyengine:jme3-lwjgl:${jmeVersion}"
    implementation "org.jmonkeyengine:jme3-effects:${jmeVersion}"

    // physics
    implementation "jme3utilities:Minie:${minieVersion}"

    // utilities
    compileOnly "org.projectlombok:lombok:${lombokVersion}"
    annotationProcessor "org.projectlombok:lombok:${lombokVersion}"
    implementation "com.simsilica:sim-math:${simMathVersion}"
    implementation "com.simsilica:sio2:${sio2Version}"
    implementation "com.jayfella:jme-fastnoise:${jmeFastNoise}"

    // logging
    implementation "org.slf4j:slf4j-api:${slf4jVersion}"
    implementation "org.slf4j:jul-to-slf4j:${slf4jVersion}"
    implementation "org.apache.logging.log4j:log4j-api:${log4j2Version}"
    implementation "org.apache.logging.log4j:log4j-core:${log4j2Version}"
    implementation "org.apache.logging.log4j:log4j-slf4j18-impl:${log4j2Version}"
    implementation "com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:${jacksonVersion}"
    implementation "com.fasterxml.jackson.core:jackson-databind:${jacksonVersion}"
}

// cleanup tasks
clean.dependsOn('cleanDLLs', 'cleanDyLibs', 'cleanSOs')

task cleanDLLs(type: Delete) {
    delete fileTree(dir: '.', include: '*.dll')
}
task cleanDyLibs(type: Delete) {
    delete fileTree(dir: '.', include: '*.dylib')
}
task cleanSOs(type: Delete) {
    delete fileTree(dir: '.', include: '*.so')
}